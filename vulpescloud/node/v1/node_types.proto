syntax = "proto3";

package vulpescloud.node.v1;

option java_package = "de.vulpescloud.proto.node.v1";
option java_multiple_files = true;

import "vulpescloud/node/v1/template.proto";
import "google/protobuf/timestamp.proto";

message TaskDefinition {
    string name = 1;
    uint64 minimum_memory = 2;
    uint64 maximum_memory = 3;
    uint64 start_port = 4;
    repeated TemplateDefinition templates = 5;
    bool static_services = 6;
    uint32 min_online_services = 7;
    uint32 max_online_services = 8;
    bool maintenance = 9;
    bool copy_template_to_static = 10;
    string service_factory_name = 11;
    string preferred_node = 12;
    uint32 max_players = 13;
}

message ServiceDefinition {
    TaskDefinition task = 1;
    string uuid = 2;
    uint32 ordered_id = 3;
    uint32 port = 4;
    string node = 5;
    ServiceState state = 6;
    uint32 player_count = 7;
    google.protobuf.Timestamp start_time = 8;
}

enum ServiceState {
    SERVICE_STATE_UNSPECIFIED = 0;
    SERVICE_STATE_RUNNING = 1;
    SERVICE_STATE_STARTING = 2;
    SERVICE_STATE_PREPARED = 3;
    SERVICE_STATE_STOPPED = 4;
}